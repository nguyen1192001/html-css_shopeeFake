(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[257],{3399:function(e,t,i){e.exports={container:"_3vqHF-",mediaPreview:"_2fsWNy",imagePlaceholder:"_3sGTGI",arrowLeft:"_2U4WLM",arrowRight:"_2ighk3",video:"_2YWiem",videoClickMask:"_3UBFZF",playButton:"_26bOyg",replayButton:"u0oije",overlayWrapper:"_2xRlgX",hidden:"_3mD1Uw",videoError:"GJrsHd",videoErrorBtn:"_27mbP6",videoErrorTxt:"_3uldpm",videoErrorSuggestion:"-LdUXn",videoErrorMask:"_3mNCgp"}},3400:function(e,t,i){e.exports={container:"_1pcBOb",title:"_3l2Jmn",thumbnails:"_3-7g20",thumbnail:"_2k76s6",actions:"_1WnSZF",button:"i6-xre",addToCartButton:"_1_9BUy",addToCartIcon:"_1-fORd"}},3401:function(e,t,i){e.exports={container:"_12QtbV"}},3969:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(47),d=i.n(o),s=i(420),r=i(1175),l=i(1638),c=i(1143),h=i(898),m=i(1166),v=i(1151),u=i(1165),p=i(1174),f=i(54),E=i(88),y=i(3399),S=i.n(y);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=E.c.t,I=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).initializeVideo=function(e){if(p.a&&e&&"video"===e.type&&i.videoDom&&!i.videoPlayer){var t=new p.d(__LOCALE__,i.videoDom,e.id?e.id:"",e.version);t.initialize(),t.on(p.b.ENDED,i.handleVideoEnded),t.on(p.b.PLAY,i.handleVideoPlaying),t.on(p.b.PLAYING,i.handleVideoPlaying),t.on(p.b.PAUSED,i.handleVideoPaused),t.on(p.b.SEEKING,i.handleVideoSeeking),t.on(p.b.SEEKED,i.handleVideoSeeked),i.videoPlayer=t,t.play()}},i.setVideoDomRef=function(e){e&&(i.videoDom=e)},i.state={videoState:p.c.PLAYING,isVideoPausedByUser:!1},i.handleVideoPlaying=i.handleVideoPlaying.bind(_(i)),i.handleVideoPaused=i.handleVideoPaused.bind(_(i)),i.handleVideoEnded=i.handleVideoEnded.bind(_(i)),i.handleVideoSeeking=i.handleVideoSeeking.bind(_(i)),i.handleVideoSeeked=i.handleVideoSeeked.bind(_(i)),i.handleVideoClick=i.handleVideoClick.bind(_(i)),i.initializeVideo=i.initializeVideo.bind(_(i)),i.videoPlayer=null,i.videoDom=null,i.mounted=!1,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.componentDidMount=function(){this.mounted=!0,this.initializeVideo(this.props.media)},o.UNSAFE_componentWillReceiveProps=function(e){this.initializeVideo(e.media)},o.componentDidUpdate=function(e){var t=this.props.media,i=this.videoPlayer;i&&t&&(e.media&&t.type===e.media.type&&t.mediaId===e.media.mediaId||("video"===t.type?this.state.isVideoPausedByUser||i&&i.play():i&&i.pause()))},o.componentWillUnmount=function(){this.mounted=!1,this.videoPlayer&&this.videoPlayer.destroy(),this.videoDom=null},o.handleVideoPlaying=function(){this.mounted&&this.setState({videoState:p.c.PLAYING})},o.handleVideoPaused=function(){this.mounted&&this.setState({videoState:p.c.PAUSED})},o.handleVideoEnded=function(){this.mounted&&this.setState({videoState:p.c.ENDED})},o.handleVideoSeeking=function(){this.mounted&&this.setState({videoState:p.c.SEEKING})},o.handleVideoSeeked=function(){this.mounted&&this.setState({videoState:this.videoPlayer&&this.videoPlayer.isPaused()?p.c.PAUSED:p.c.PLAYING})},o.handleVideoClick=function(){if(this.videoPlayer){var e=this.videoPlayer;e.isPaused()?e.play():e.pause(),this.mounted&&(this.state.videoState===p.c.ENDED?this.setState({isVideoPausedByUser:!1}):this.setState({isVideoPausedByUser:!this.state.isVideoPausedByUser}),this.setState({videoState:this.state.videoState===p.c.PLAYING?p.c.PAUSED:p.c.PLAYING}))}},o.render=function(){var e,t=this.props,i=t.media,a=t.showArrows,o=t.onLeftArrowClick,s=t.onRightArrowClick,E=t.overlays,y=t.previewInfo,_=t.flashSaleInfo,I=this.state.videoState,P=!!i&&"video"===i.type;return n.createElement("div",{className:S.a.container},n.createElement("video",{ref:this.setVideoDomRef,"data-dashjs-player":!0,controls:!0,style:{display:P&&p.a?"block":"none"},className:S.a.video}),P&&(p.a?n.createElement(n.Fragment,null,n.createElement("div",{className:S.a.videoClickMask,onClick:this.handleVideoClick}),I===p.c.PAUSED||I===p.c.SEEKING?n.createElement(l.a,{className:S.a.playButton}):I===p.c.ENDED&&n.createElement(c.a,{className:S.a.replayButton})):n.createElement("div",{className:S.a.videoError,style:i?{backgroundImage:"url("+Object(f.e)(i.mediaId,!1)+")"}:null},n.createElement("div",{className:S.a.videoErrorMask},n.createElement(r.a,{className:S.a.videoErrorBtn}),n.createElement("div",{className:S.a.videoErrorTxt},k("msg_video_not_supported")),n.createElement("div",{className:S.a.videoErrorSuggestion},k("msg_suggest_chrome"))))),!P&&n.createElement(h.a,{src:i&&i.mediaId?Object(f.e)(i.mediaId):"",className:S.a.mediaPreview,placeholderClassName:S.a.imagePlaceholder}),!!E&&n.createElement("div",{className:d()(S.a.overlayWrapper,(e={},e[S.a.hidden]=P&&I!==p.c.ENDED,e))},n.createElement(u.a,{overlays:E,previewInfo:y,flashSaleInfo:_})),a&&n.createElement("div",{className:S.a.arrowLeft,onClick:o},n.createElement(m.a,null)),a&&n.createElement("div",{className:S.a.arrowRight,onClick:s},n.createElement(v.a,null)))},a}(n.Component),P=i(76),w=i(2202),b=i(2492),N=i(3400),V=i.n(N);var C=Object(P.connect)(function(e,t){var i=t.item?Object(b.c)(t.item.shopid)(e):null;return{shop:i&&i.shopInfo}})(function(e){var t=e.item,i=e.overlays;return a.a.createElement("div",{className:V.a.container},a.a.createElement("div",{className:V.a.title},t?t.name:null),a.a.createElement("div",{className:V.a.thumbnails},e.mediaList.map(function(n,o){return a.a.createElement(w.a,{key:o,media:n,isActive:e.selectedIndex===o,className:V.a.thumbnail,onClick:function(){return e.onClick(o)},showMediaDuration:!0,showHoverMask:!0,overlays:0===o?i:void 0,previewInfo:t?t.preview_info:void 0,flashSaleInfo:t?t.flash_sale:void 0})})))}),D=i(3401),g=i.n(D);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A=-1,L=1,U=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).state={selectedIndex:t.selectedIndex},i.onMediaClick=i.onMediaClick.bind(x(i)),i.handleKeyDown=i.handleKeyDown.bind(x(i)),i.moveSelectedIndex=i.moveSelectedIndex.bind(x(i)),i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.UNSAFE_componentWillMount=function(){window.addEventListener("keydown",this.handleKeyDown)},o.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},o.onMediaClick=function(e){this.setState({selectedIndex:e})},o.handleKeyDown=function(e){switch(e.preventDefault(),e.keyCode){case 27:return void this.props.onClose();case 37:return void this.moveSelectedIndex(A);case 39:return void this.moveSelectedIndex(L)}},o.moveSelectedIndex=function(e){var t=this.props.mediaList,i=t?t.length:0;i>1&&this.setState({selectedIndex:(this.state.selectedIndex+e+i)%i})},o.render=function(){var e=this,t=this.props,i=this.state.selectedIndex,a=t.item,o=t.mediaList,r=t.overlays,l=t.addItemToCart;return n.createElement(s.b,{closeWhenClickOverlay:!0,onClose:t.onClose},n.createElement("div",{className:d()("flex",g.a.container)},n.createElement(I,{media:o&&o[i],showArrows:o&&o.length>1,onLeftArrowClick:function(){return e.moveSelectedIndex(A)},onRightArrowClick:function(){return e.moveSelectedIndex(L)},overlays:0===i?r:void 0,previewInfo:a?a.preview_info:void 0,flashSaleInfo:a?a.flash_sale:void 0}),n.createElement(C,{item:a,mediaList:o,selectedIndex:i,showMediaDuration:!0,onClick:this.onMediaClick,addItemToCart:l,overlays:r,flashSaleInfo:a?a.flash_sale:void 0})))},a}(n.Component);t.default=U}}]);
//# sourceMappingURL=https://shopee.sg/assets/ProductPageMediaPopup.e12f70d95be8b302a47b.js.map